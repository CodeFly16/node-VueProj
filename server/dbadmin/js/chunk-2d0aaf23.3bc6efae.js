(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aaf23"],{"12d0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v(" 添加读者 ")]),a("a-spin",{attrs:{tip:"Loading...",spinning:e.spinning}},[a("a-table",{staticStyle:{"margin-top":"10px"},attrs:{bordered:"","data-source":e.dataSource,columns:e.columns},scopedSlots:e._u([{key:"operation",fn:function(t,r){return[e.dataSource.length?a("a-popconfirm",{attrs:{title:"确认删除吗"},on:{confirm:function(){return e.onDelete(r.rdID)}}},[a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"}},[e._v(" 删除 ")])],1):e._e(),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.edit(r.rdID)}}},[e._v("编辑")])]}}])})],1),a("a-modal",{attrs:{title:"添加读者类别","ok-text":"确认","cancel-text":"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-item",{attrs:{label:"类型"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择读者类型"},model:{value:e.model.rdType,callback:function(t){e.$set(e.model,"rdType",t)},expression:"model.rdType"}},e._l(e.selectData,(function(t){return a("a-select-option",{key:t.rdType,attrs:{value:t.rdType}},[e._v(" "+e._s(t.rdTypeName)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{attrs:{placeholder:"请输入读者姓名"},model:{value:e.model.rdName,callback:function(t){e.$set(e.model,"rdName",t)},expression:"model.rdName"}})],1),a("a-form-item",{attrs:{label:"部门"}},[a("a-input",{attrs:{placeholder:"请输入读者部门"},model:{value:e.model.rdDept,callback:function(t){e.$set(e.model,"rdDept",t)},expression:"model.rdDept"}})],1),a("a-form-item",{attrs:{label:"QQ"}},[a("a-input",{attrs:{placeholder:"请输入读者QQ"},model:{value:e.model.rdQQ,callback:function(t){e.$set(e.model,"rdQQ",t)},expression:"model.rdQQ"}})],1),a("a-form-item",{attrs:{label:"已借书数量"}},[a("a-input",{attrs:{placeholder:"请输入读者已借书数量"},model:{value:e.model.rdBorrowQty,callback:function(t){e.$set(e.model,"rdBorrowQty",t)},expression:"model.rdBorrowQty"}})],1)],1)],1)],1)},n=[],o=(a("4160"),a("159b"),a("2909")),s=(a("96cf"),a("1da1")),l={name:"LibraryManagement",data:function(){return{model:{},labelCol:{span:7},wrapperCol:{span:14},dataSource:[],columns:[{title:"类型",dataIndex:"rdTypeName"},{title:"姓名",dataIndex:"rdName"},{title:"部门",dataIndex:"rdDept"},{title:"QQ",dataIndex:"rdQQ"},{title:"已借书数量",dataIndex:"rdBorrowQty"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"200px"}],spinning:!0,visible:!1,isEdit:!1,selectData:[]}},created:function(){this.loadData(),this.loadDictData()},methods:{loadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataSource=[],t.next=3,e.$http[1].get("/rest/testSix/readerManagement");case 3:a=t.sent,r=a.data,e.dataSource=Object(o["a"])(r.data),e.spinning=!1,console.log(e.dataSource);case 8:case"end":return t.stop()}}),t)})))()},loadDictData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http[1].get("/rest/testSix/readerCategory");case 2:a=t.sent,r=a.data,console.log(r),r.data.forEach((function(t){e.selectData.push({rdType:t.rdType,rdTypeName:t.rdTypeName})}));case 6:case"end":return t.stop()}}),t)})))()},showModal:function(){this.isEdit=!1,this.model={},this.visible=!0},onDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.$http[1].delete("/rest/testSix/readerManagement/".concat(e));case 3:r=a.sent,n=r.data,"success"===n.msg&&(t.loadData(),t.$message.success("删除成功"));case 6:case"end":return a.stop()}}),a)})))()},handleOk:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.model),t.isEdit){e.next=9;break}return e.next=4,t.$http[1].post("/rest/testSix/readerManagement",t.model);case 4:a=e.sent,r=a.data,"success"===r.msg&&(t.loadData(),t.$message.success("添加成功")),e.next=14;break;case 9:return e.next=11,t.$http[1].put("/rest/testSix/readerManagement",t.model);case 11:n=e.sent,o=n.data,"success"===o.msg&&(t.loadData(),t.$message.success("编辑成功"));case 14:t.visible=!1;case 15:case"end":return e.stop()}}),e)})))()},edit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isEdit=!0,console.log(e),a.next=4,t.$http[1].get("/rest/testSix/readerManagement/".concat(e));case 4:r=a.sent,n=r.data,console.log(n),t.model=n.data[0],console.log(t.model),t.visible=!0;case 10:case"end":return a.stop()}}),a)})))()}}},i=l,c=a("2877"),d=Object(c["a"])(i,r,n,!1,null,"0469b923",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0aaf23.3bc6efae.js.map