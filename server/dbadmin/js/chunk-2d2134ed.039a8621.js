(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2134ed"],{abb8:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v(" 添加图书 ")]),a("a-spin",{attrs:{tip:"Loading...",spinning:e.spinning}},[a("a-table",{staticStyle:{"margin-top":"10px"},attrs:{bordered:"","data-source":e.dataSource,columns:e.columns},scopedSlots:e._u([{key:"operation",fn:function(t,l){return[e.dataSource.length?a("a-popconfirm",{attrs:{title:"确认删除吗"},on:{confirm:function(){return e.onDelete(l._id)}}},[a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"}},[e._v(" 删除 ")])],1):e._e(),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.edit(l._id)}}},[e._v("编辑")])]}}])})],1),a("a-modal",{attrs:{title:"添加图书","ok-text":"确认","cancel-text":"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-item",{attrs:{label:"图书编号"}},[a("a-input",{attrs:{placeholder:"请输入图书编号"},model:{value:e.model.bkCode,callback:function(t){e.$set(e.model,"bkCode",t)},expression:"model.bkCode"}})],1),a("a-form-item",{attrs:{label:"图书书名"}},[a("a-input",{attrs:{placeholder:"请输入书名"},model:{value:e.model.bkName,callback:function(t){e.$set(e.model,"bkName",t)},expression:"model.bkName"}})],1),a("a-form-item",{attrs:{label:"图书作者"}},[a("a-input",{attrs:{placeholder:"请输入作者"},model:{value:e.model.bkAuthor,callback:function(t){e.$set(e.model,"bkAuthor",t)},expression:"model.bkAuthor"}})],1),a("a-form-item",{attrs:{label:"图书出版社"}},[a("a-input",{attrs:{placeholder:"请输入出版社"},model:{value:e.model.bkPress,callback:function(t){e.$set(e.model,"bkPress",t)},expression:"model.bkPress"}})],1),a("a-form-item",{attrs:{label:"图书出版日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入出版日期"},on:{change:e.setDate},model:{value:e.model.bkDatePress,callback:function(t){e.$set(e.model,"bkDatePress",t)},expression:"model.bkDatePress"}})],1),a("a-form-item",{attrs:{label:"图书ISBN书号"}},[a("a-input",{attrs:{placeholder:"请输入ISBN书号"},model:{value:e.model.bkISBN,callback:function(t){e.$set(e.model,"bkISBN",t)},expression:"model.bkISBN"}})],1),a("a-form-item",{attrs:{label:"图书分类"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":e.model.bkCatalog,placeholder:"请选择分类"},model:{value:e.model.bkCatalog,callback:function(t){e.$set(e.model,"bkCatalog",t)},expression:"model.bkCatalog"}},e._l(e.cateList,(function(t){return a("a-select-option",{attrs:{value:t.cateNumber}},[e._v(" "+e._s(t.cateName)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"图书语言"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":e.model.bkLanguage,placeholder:"请选择语言"},model:{value:e.model.bkLanguage,callback:function(t){e.$set(e.model,"bkLanguage",t)},expression:"model.bkLanguage"}},e._l(e.language,(function(t){return a("a-select-option",{attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"图书页数"}},[a("a-input",{attrs:{placeholder:"请输入页数"},model:{value:e.model.bkPages,callback:function(t){e.$set(e.model,"bkPages",t)},expression:"model.bkPages"}})],1),a("a-form-item",{attrs:{label:"图书价格"}},[a("a-input",{attrs:{placeholder:"请输入价格"},model:{value:e.model.bkPrice,callback:function(t){e.$set(e.model,"bkPrice",t)},expression:"model.bkPrice"}})],1),a("a-form-item",{attrs:{label:"图书简介"}},[a("a-input",{attrs:{placeholder:"请输入简介"},model:{value:e.model.bkBrief,callback:function(t){e.$set(e.model,"bkBrief",t)},expression:"model.bkBrief"}})],1),a("a-form-item",{attrs:{label:"上传图书封面照片"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file","list-type":"picture-card",headers:{Authorization:"Bearer "+e.token},"show-upload-list":!1,action:e.$http[0].defaults.baseURL+"/upload"},on:{change:e.uploadPic}},[e.model.bkCover?a("img",{staticStyle:{width:"100%"},attrs:{src:e.model.bkCover,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" Upload ")])],1)])],1),a("a-form-item",{attrs:{label:"图书状态"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":e.model.bkStatus?e.model.bkStatus:"在馆",placeholder:"请选择图书状态"},model:{value:e.model.bkStatus,callback:function(t){e.$set(e.model,"bkStatus",t)},expression:"model.bkStatus"}},e._l(e.status,(function(t){return a("a-select-option",{attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1)},o=[],n=a("2909"),s=(a("96cf"),a("1da1")),r={name:"bookMaintenance",data:function(){return{model:{},labelCol:{span:7},wrapperCol:{span:14},dataSource:[],language:[{value:0,label:"中文"},{value:1,label:"英文"},{value:2,label:"日文"},{value:3,label:"俄文"},{value:4,label:"德文"},{value:5,label:"法文"}],status:["在馆","借出","遗失","变卖","销毁"],cateList:[],columns:[{title:"编号",dataIndex:"bkCode"},{title:"书名",dataIndex:"bkName"},{title:"作者",dataIndex:"bkAuthor"},{title:"ISBN书号",dataIndex:"bkISBN"},{title:"状态",dataIndex:"bkStatus"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"200px"}],token:localStorage.getItem("token"),spinning:!0,visible:!1,loading:!1,isEdit:!1}},created:function(){this.loadData(),this.fetchCata()},methods:{uploadPic:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e),this.loading=!1,this.$set(this.model,"bkCover",e.file.response.url)):this.loading=!0},fetchCata:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http[0].get("/rest/bookCatalog");case 2:a=t.sent,e.cateList=a.data;case 4:case"end":return t.stop()}}),t)})))()},setDate:function(e,t){this.model.bkDatePress=t},onDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http[0].delete("/rest/book/".concat(e));case 2:l=a.sent,200===l.status&&(t.loadData(),t.$message.success("删除成功"));case 4:case"end":return a.stop()}}),a)})))()},loadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataSource=[],t.next=3,e.$http[0].get("/rest/book");case 3:a=t.sent,e.dataSource=Object(n["a"])(a.data),e.spinning=!1,console.log(e.dataSource);case 7:case"end":return t.stop()}}),t)})))()},showModal:function(){this.isEdit=!1,this.model={},this.visible=!0},handleOk:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.model),t.isEdit){e.next=9;break}return e.next=4,t.$http[0].post("/rest/book",t.model);case 4:a=e.sent,console.log(a),200===a.status&&(t.loadData(),t.$message.success("添加成功")),e.next=13;break;case 9:return e.next=11,t.$http[0].put("/rest/book/".concat(t.model._id),t.model);case 11:l=e.sent,200===l.status&&(t.loadData(),t.$message.success("编辑成功"));case 13:t.visible=!1;case 14:case"end":return e.stop()}}),e)})))()},edit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var l,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isEdit=!0,a.next=3,t.$http[0].get("/rest/book/".concat(e));case 3:l=a.sent,o=l.data,t.model=o,console.log(t.model),t.visible=!0;case 8:case"end":return a.stop()}}),a)})))()}}},i=r,c=a("2877"),u=Object(c["a"])(i,l,o,!1,null,"f08c47c2",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d2134ed.039a8621.js.map