(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a9d5"],{bbed:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v(" 添加借书证 ")]),a("a-spin",{attrs:{tip:"Loading...",spinning:e.spinning}},[a("a-table",{staticStyle:{"margin-top":"10px"},attrs:{bordered:"","data-source":e.dataSource,columns:e.columns},scopedSlots:e._u([{key:"operation",fn:function(t,r){return[e.dataSource.length?a("a-popconfirm",{attrs:{title:"确认注销吗"},on:{confirm:function(){return e.onDelete(r._id)}}},[a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"}},[e._v(" 注销 ")])],1):e._e(),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.edit(r._id)}}},[e._v("编辑")])]}}])})],1),a("a-modal",{attrs:{title:"添加借书证","ok-text":"确认","cancel-text":"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",{attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-item",{attrs:{label:"学号"}},[a("a-input",{attrs:{placeholder:"请输入读者学号"},model:{value:e.model.rdCard,callback:function(t){e.$set(e.model,"rdCard",t)},expression:"model.rdCard"}})],1),a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{attrs:{placeholder:"请输入读者姓名"},model:{value:e.model.rdName,callback:function(t){e.$set(e.model,"rdName",t)},expression:"model.rdName"}})],1),a("a-form-item",{attrs:{label:"性别"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":"男",placeholder:"请选择读者性别"},model:{value:e.model.rdSex,callback:function(t){e.$set(e.model,"rdSex",t)},expression:"model.rdSex"}},[a("a-select-option",{attrs:{value:"男"}},[e._v(" 男 ")]),a("a-select-option",{attrs:{value:"女"}},[e._v(" 女 ")])],1)],1),a("a-form-item",{attrs:{label:"类别"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":e.model.rdType,placeholder:"请选择读者类别"},model:{value:e.model.rdType,callback:function(t){e.$set(e.model,"rdType",t)},expression:"model.rdType"}},e._l(e.rdTypeList,(function(t){return a("a-select-option",{key:t,attrs:{value:t.rdType}},[e._v(" "+e._s(t.rdType)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"单位"}},[a("a-input",{attrs:{placeholder:"请输入读者单位"},model:{value:e.model.rdDept,callback:function(t){e.$set(e.model,"rdDept",t)},expression:"model.rdDept"}})],1),a("a-form-item",{attrs:{label:"手机号"}},[a("a-input",{attrs:{placeholder:"请输入读者手机号"},model:{value:e.model.rdPhone,callback:function(t){e.$set(e.model,"rdPhone",t)},expression:"model.rdPhone"}})],1),a("a-form-item",{attrs:{label:"邮箱"}},[a("a-input",{attrs:{placeholder:"请输入读者邮箱"},model:{value:e.model.rdEmail,callback:function(t){e.$set(e.model,"rdEmail",t)},expression:"model.rdEmail"}})],1),a("a-form-item",{attrs:{label:"办证日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择读者办证日期"},on:{change:e.setDate},model:{value:e.model.rdDateReg,callback:function(t){e.$set(e.model,"rdDateReg",t)},expression:"model.rdDateReg"}})],1),a("a-form-item",{attrs:{label:"照片"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file","list-type":"picture-card",headers:{Authorization:"Bearer "+e.token},"show-upload-list":!1,action:"http://47.98.225.213/admin/api/upload"},on:{change:e.uploadPic}},[e.model.rdPhoto?a("img",{staticStyle:{width:"100%"},attrs:{src:e.model.rdPhoto,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(" Upload ")])],1)])],1),a("a-form-item",{attrs:{label:"证件状态"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":e.model.rdStatus?e.model.rdStatus:"正常",placeholder:"请选择读者证件状态"},model:{value:e.model.rdStatus,callback:function(t){e.$set(e.model,"rdStatus",t)},expression:"model.rdStatus"}},e._l(e.status,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"密码"}},[a("a-input",{attrs:{placeholder:"请输入读者密码",type:"password"},model:{value:e.model.rdPwd,callback:function(t){e.$set(e.model,"rdPwd",t)},expression:"model.rdPwd"}})],1),a("a-form-item",{attrs:{label:"角色类型"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":e.model.rdAdminRoles?e.model.rdAdminRoles:"读者",placeholder:"请选择角色类型"},model:{value:e.model.rdAdminRoles,callback:function(t){e.$set(e.model,"rdAdminRoles",t)},expression:"model.rdAdminRoles"}},e._l(e.rdAdminType,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1)},o=[],l=a("2909"),n=(a("96cf"),a("1da1")),s={name:"bookMaintenance",data:function(){return{model:{},labelCol:{span:7},wrapperCol:{span:14},dataSource:[],cateList:[],columns:[{title:"学号",dataIndex:"rdCard"},{title:"姓名",dataIndex:"rdName"},{title:"类别",dataIndex:"rdType"},{title:"单位",dataIndex:"rdDept"},{title:"角色类型",dataIndex:"rdAdminRoles"},{title:"证件状态",dataIndex:"rdStatus"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"200px"}],token:localStorage.getItem("token"),status:["挂失","注销","正常","过期"],rdAdminType:["读者","借书证管理员","图书管理员","借阅管理员","系统管理员"],rdTypeList:[],spinning:!0,visible:!1,loading:!1,isEdit:!1}},created:function(){this.loadData(),this.fetchRdTypeList()},methods:{uploadPic:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e),this.loading=!1,this.$set(this.model,"rdPhoto",e.file.response.url)):this.loading=!0},fetchRdTypeList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http[0].get("/rest/readerType");case 2:a=t.sent,e.rdTypeList=a.data;case 4:case"end":return t.stop()}}),t)})))()},setDate:function(e,t){this.model.rdDateReg=t},onDelete:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http[0].delete("/rest/readerInfo/".concat(e));case 2:r=a.sent,200===r.status&&(t.loadData(),t.$message.success("删除成功"));case 4:case"end":return a.stop()}}),a)})))()},loadData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataSource=[],t.next=3,e.$http[0].get("/rest/readerInfo");case 3:a=t.sent,e.dataSource=Object(l["a"])(a.data),e.spinning=!1,console.log(e.dataSource);case 7:case"end":return t.stop()}}),t)})))()},showModal:function(){this.isEdit=!1,this.model={},this.visible=!0},handleOk:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.model),t.isEdit){e.next=9;break}return e.next=4,t.$http[0].post("/rest/readerInfo",t.model);case 4:a=e.sent,console.log(a),200===a.status&&(t.loadData(),t.$message.success("添加成功")),e.next=13;break;case 9:return e.next=11,t.$http[0].put("/rest/readerInfo/".concat(t.model._id),t.model);case 11:r=e.sent,200===r.status&&(t.loadData(),t.$message.success("编辑成功"));case 13:t.visible=!1;case 14:case"end":return e.stop()}}),e)})))()},edit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isEdit=!0,a.next=3,t.$http[0].get("/rest/readerInfo/".concat(e));case 3:r=a.sent,o=r.data,t.model=o,console.log(t.model),t.visible=!0;case 8:case"end":return a.stop()}}),a)})))()}}},d=s,i=a("2877"),c=Object(i["a"])(d,r,o,!1,null,"2e900951",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d21a9d5.22e084d3.js.map